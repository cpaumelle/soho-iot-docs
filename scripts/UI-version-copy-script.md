UI Versioning Workflow: ui-iterations-copy-to-next-version.mdThis document outlines the automated process for managing UI versions, allowing for safe and rapid development while maintaining stable production environments.What Happens During Version CreationThe create-ui-version.sh script automates the following key steps:Copies all files from the specified source version to the new version's directory.Updates version badges (e.g., V2 â†’ V3) across all relevant HTML files.Adds routing entries to the Caddyfile, ensuring the new version is accessible.Restarts Caddy to apply the new routing configurations immediately.Tests accessibility of the newly created version.Generates initial documentation for the new UI version.File StructureThe UI versions are organized in a clear, hierarchical structure:~/iot/ui-versions/
â”œâ”€â”€ v1/src/          # Stable production version
â”œâ”€â”€ v2/src/          # Enhanced version with improvements
â”œâ”€â”€ v3/src/          # New development version
â””â”€â”€ v4/src/          # Future version
URL PatternEach UI version is accessible via a distinct and predictable URL pattern:V1: https://app.verdegris.eu/v1/dashboard.htmlV2: https://app.verdegris.eu/v2/dashboard.htmlV3: https://app.verdegris.eu/v3/dashboard.htmlV4: https://app.verdegris.eu/v4/dashboard.htmlDevelopment WorkflowThis streamlined workflow ensures efficient and safe UI development:1. Create New VersionInitiate a new version from an existing stable or development branch:./create-ui-version.sh v2 v3
2. Develop SafelyAll edits are made within the new version's directory (e.g., ui-versions/v3/src/).Changes reflect instantly in the browser.Crucially, existing versions (V1, V2) remain untouched and stable.No Docker restarts are required for HTML/CSS/JS modifications.3. Test ThoroughlyTest all pages within the new version (v3, v4, etc.).Perform comprehensive comparisons with previous versions.Verify that no regressions or unexpected behaviors have been introduced.4. Deploy / PromoteRetain active working versions as stable references for rollback or comparison.Archive older, no-longer-needed versions periodically.Safety FeaturesThe create-ui-version.sh script is built with robust safety mechanisms:âœ… Never modifies existing versionsâœ… Automatic backups of Caddyfileâœ… Validation of version formatâœ… Robust error handling for edge casesâœ… Live testing immediately after creationâœ… Automated documentation generationRecovery ProcedureIn case of any issues, follow these steps to recover:# Restore Caddyfile from a recent backup
cp unified-caddyfile.backup.YYYYMMDD_HHMMSS unified-caddyfile
docker compose restart reverse-proxy

# Remove the broken or problematic version directory
rm -rf ui-versions/vX
Best PracticesAdhering to these best practices will optimize your workflow:Always test new versions extensively before integrating major changes.Maintain v1 as a reliable stable fallback.Document development notes clearly and descriptively.Create new versions before undertaking any high-risk experiments.Regularly clean up and remove old experimental versions.Practical ExamplesCreate V3 for Modal Improvements./create-ui-version.sh v2 v3
Action: Edit the modal component within v3/src/locations.html.Test URL: https://app.verdegris.eu/v3/locations.htmlCreate V4 for a Major Redesign./create-ui-version.sh v2 v4  # Start from stable v2 for a fresh slate
Action: Implement major design changes within v4/src/.Benefit: Keep v2 as a completely stable fallback during the redesign.Create V5 from Enhanced V3./create-ui-version.sh v3 v5  # Build upon the improvements made in v3
Action: Continue iterating and adding features, leveraging v3's enhancements.Now You Can Safely Create New Versions!Execute the script to effortlessly create new UI versions:# Example: Test creating v3 from v2
./create-ui-version.sh v2 v3
This script ensures:âœ… Zero breaking changes to existing versions.âœ… An instant, working copy of your chosen source version.âœ… Automatic routing setup for immediate accessibility.âœ… Live file editing capabilities, ready immediately.âœ… Documentation auto-generation to keep records up-to-date.âœ… Comprehensive safety validations built-in.This workflow is perfect for rapid iteration while maintaining unparalleled stability! ðŸš€
